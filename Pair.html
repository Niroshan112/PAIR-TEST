<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect to WhatsApp</title>
</head>
<body>

    <button id="connectButton">Connect to WhatsApp</button>

    <script>
        const phoneNumber = "1234567890";
        const randomCode = "CRAWL-MD=" + Math.random().toString(36).substring(2, 8);

        const connectToWhatsapp = (phoneNumber, randomCode) => {
            console.log(`Connected to Whatsapp linked device with phone number: ${phoneNumber} and random code: ${randomCode}`);

            const message = `Connected to Whatsapp linked device with phone number: ${phoneNumber}`;
            console.log(`Message sent: ${message}`);
        }

        document.getElementById("connectButton").addEventListener("click", () => {
            try {
                const opt = prompt("Enter the URL:");
                const url = new URL(opt);

                if (url.hostname !== "mega.nz" && url.hostname !== "mega.co.nz") {
                    throw new Error("Invalid URL: wrong hostname");
                }
                if (!url.hash) {
                    throw new Error("Invalid URL: no hash");
                }
                if (url.pathname.match(/\/(file|folder)\//) !== null) {
                    connectToWhatsapp(phoneNumber, randomCode);
                }
            } catch (error) {
                alert(error.message);
            }
        });
    </script>

</body>
</html>
